<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Data Wrangling | Intro to Data Wrangling and Analysis Using R</title>
<meta name="author" content="Emily Nordmann &amp; Javan Carter">
<meta name="description" content="2.1 Intended Learning Outcomes By the end of this chapter you should be able to: Select and filter data for relevance Create new columns and edit existing ones Handle missing data  2.2 Walkthrough...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 2 Data Wrangling | Intro to Data Wrangling and Analysis Using R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://emilynordmann.github.io/AllOfUs-data-analysis/wrangle.html">
<meta property="og:image" content="https://emilynordmann.github.io/AllOfUs-data-analysis/images/logos/logo.png">
<meta property="og:description" content="2.1 Intended Learning Outcomes By the end of this chapter you should be able to: Select and filter data for relevance Create new columns and edit existing ones Handle missing data  2.2 Walkthrough...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Data Wrangling | Intro to Data Wrangling and Analysis Using R">
<meta name="twitter:description" content="2.1 Intended Learning Outcomes By the end of this chapter you should be able to: Select and filter data for relevance Create new columns and edit existing ones Handle missing data  2.2 Walkthrough...">
<meta name="twitter:image" content="https://emilynordmann.github.io/AllOfUs-data-analysis/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Intro to Data Wrangling and Analysis Using R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="prerequisites.html"><span class="header-section-number">1</span> Pre-requisites</a></li>
<li><a class="active" href="wrangle.html"><span class="header-section-number">2</span> Data Wrangling</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">3</span> Data Tidying</a></li>
<li><a class="" href="live-office-hour-1.html"><span class="header-section-number">4</span> Live Office Hour 1</a></li>
<li><a class="" href="analysis1.html"><span class="header-section-number">5</span> Comparing Means</a></li>
<li><a class="" href="analysis2.html"><span class="header-section-number">6</span> Correlation and Regression</a></li>
<li><a class="" href="live-office-hour-2.html"><span class="header-section-number">7</span> Live Office Hour 2</a></li>
<li><a class="" href="completion-quiz.html"><span class="header-section-number">8</span> Completion Quiz</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="ai-and-coding.html"><span class="header-section-number">A</span> AI and coding</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/template">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="wrangle" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Data Wrangling<a class="anchor" aria-label="anchor" href="#wrangle"><i class="fas fa-link"></i></a>
</h1>
<div id="ilo-wrangle" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Intended Learning Outcomes<a class="anchor" aria-label="anchor" href="#ilo-wrangle"><i class="fas fa-link"></i></a>
</h2>
<p>By the end of this chapter you should be able to:</p>
<ul>
<li>Select and filter data for relevance</li>
<li>Create new columns and edit existing ones</li>
<li>Handle missing data</li>
</ul>
</div>
<div id="walkthrough-wrangle" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Walkthrough video<a class="anchor" aria-label="anchor" href="#walkthrough-wrangle"><i class="fas fa-link"></i></a>
</h2>
<p>We encourage you to read the workbook and attempt each step on your own before watching the video as this will help consolidate your learning (it may feel harder but making mistakes is informative and will help you learn more in the long-run).</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8vvLmz6sCFQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
</div>
<div id="setup-wrangle" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Set-up<a class="anchor" aria-label="anchor" href="#setup-wrangle"><i class="fas fa-link"></i></a>
</h2>
<p>Create a new project for this course and then do the following:</p>
<ul>
<li>Create and save a new R Markdown document named <code>chapter_2.Rmd</code>, get rid of the default template text from line 11 onwards.</li>
<li>Add the below code to the set-up chunk and then run the code to load the packages and data.You may need to install the packages if you don't have them installed already.</li>
<li>Download the <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf">Data transformation cheat sheet</a>
</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>   </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://higgi13425.github.io/medicaldata/">medicaldata</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"opt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"polyps"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="wrangling-functions" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Wrangling functions<a class="anchor" aria-label="anchor" href="#wrangling-functions"><i class="fas fa-link"></i></a>
</h2>
<p>Data wrangling refers to the process of cleaning, transforming, and restructuring your data to get it into the format you need for analysis and it's something you will spend an awful lot of time doing. It's worth highlighting that in this chapter we're going to cover common functions and common uses of said functions. However, <code class="package">dplyr</code> (and packages beyond it) has a huge number of additional wrangling functions and each function has many different arguments. Essentially, if you think you should be able to wrangle your data in a particular way that we haven't explicitly shown you, you almost certainly can, it might just take a bit of Googling to find out how.</p>
<p>We're going to use the <code>polyps</code> and <code>opt</code> datasets. You can learn more about these datasets by using the help function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="fu">medicaldata</span><span class="fu">::</span><span class="va"><a href="https://higgi13425.github.io/medicaldata/reference/opt.html">opt</a></span></span>
<span><span class="op">?</span><span class="fu">medicaldata</span><span class="fu">::</span><span class="va"><a href="https://higgi13425.github.io/medicaldata/reference/polyps.html">polyps</a></span></span></code></pre></div>
<div id="select" class="section level3" number="2.4.1">
<h3>
<span class="header-section-number">2.4.1</span> Select<a class="anchor" aria-label="anchor" href="#select"><i class="fas fa-link"></i></a>
</h3>
<p>You can select a subset of the columns (variables) in a table to make it easier to view or to prepare a table for display. You can also select columns in a new order.</p>
<div id="by-name-or-index" class="section level4" number="2.4.1.1">
<h4>
<span class="header-section-number">2.4.1.1</span> By name or index<a class="anchor" aria-label="anchor" href="#by-name-or-index"><i class="fas fa-link"></i></a>
</h4>
<p>You can select columns by name or number (which is sometimes referred to as the column index). Selecting by number can be useful when the column names are long or complicated. The <code>opt</code> dataset has a huge number of variables (171 in total) and it's likely that you might not need all of these.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select columns by name</span></span>
<span><span class="va">opt_select</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Clinic</span>, <span class="va">Age</span>, <span class="va">Education</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># select columns by number</span></span>
<span><span class="va">opt_select</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span> </span></code></pre></div>
<p>You can select each column individually, separated by commas but you can also select all columns from one to another by separating them with a colon. The colon notation can be much faster because you don't need to type out each individual variable name, but make sure that you know what order your columns are in and always check the output to make sure you have selected what you intended.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select columns individually</span></span>
<span><span class="va">opt_multiple</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">PID</span>, <span class="va">Clinic</span>, <span class="va">Group</span>, <span class="va">Age</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select columns with colon</span></span>
<span><span class="va">opt_multiple</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">PID</span><span class="op">:</span><span class="va">Age</span><span class="op">)</span></span></code></pre></div>
<p>You can rename columns at the same time as selecting them by setting <code>new_name = old_col</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt_rename</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">PID</span>, Location <span class="op">=</span> <span class="va">Clinic</span>, <span class="va">Black</span><span class="op">:</span><span class="va">Hisp</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">opt_rename</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">PID</th>
<th align="left">Location</th>
<th align="left">Black</th>
<th align="left">White</th>
<th align="left">Nat.Am</th>
<th align="left">Asian</th>
<th align="left">Hisp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">100034</td>
<td align="left">NY</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">100042</td>
<td align="left">NY</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="left"></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="de-selecting-columns" class="section level4" number="2.4.1.2">
<h4>
<span class="header-section-number">2.4.1.2</span> De-selecting columns<a class="anchor" aria-label="anchor" href="#de-selecting-columns"><i class="fas fa-link"></i></a>
</h4>
<p>You can select columns either by telling R which ones you want to keep as in the previous examples, or by specifying which ones you want to exclude by using a minus symbol to de-select columns. You can also use the colon notation to de-select columns, but to do so you need to put parentheses around the span first, e.g., <code>-(Black:Hisp)</code>, not <code>-Black:Hisp</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># de-select individual columns</span></span>
<span><span class="va">opt_deselect</span> <span class="op">&lt;-</span> <span class="va">opt_rename</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Location</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># de-select a range of columns</span></span>
<span><span class="va">opt_deselect2</span> <span class="op">&lt;-</span> <span class="va">opt_rename</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="va">Black</span><span class="op">:</span><span class="va">Hisp</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="select-helpers" class="section level4" number="2.4.1.3">
<h4>
<span class="header-section-number">2.4.1.3</span> Select helpers<a class="anchor" aria-label="anchor" href="#select-helpers"><i class="fas fa-link"></i></a>
</h4>
<p>Finally, you can select columns based on criteria about the column names, for example:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>function</th>
<th>definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code></td>
<td>select columns that start with a character string</td>
</tr>
<tr class="even">
<td><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code></td>
<td>select columns that end with a character string</td>
</tr>
<tr class="odd">
<td><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code></td>
<td>select columns that contain a character string</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="filter" class="section level3" number="2.4.2">
<h3>
<span class="header-section-number">2.4.2</span> Filter<a class="anchor" aria-label="anchor" href="#filter"><i class="fas fa-link"></i></a>
</h3>
<p>Whilst <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> chooses the columns you want to retain, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> chooses the rows to retain by matching row or column criteria.</p>
<p>You can filter by a single criterion. This criterion can be rows where a certain column's value matches a character value (e.g., "NY") or a number (e.g., 20). It can also be the result of a logical equation (e.g., keep all rows with a specific column value larger than a certain value). The criterion is checked for each row, and if the result is FALSE, the row is removed. You can reverse equations by specifying <code>!=</code> where <code>!</code> means "not".</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select all rows where clinic equals NY</span></span>
<span><span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Clinic</span> <span class="op">==</span> <span class="st">"NY"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select all rows where Age is exactly equal to 20</span></span>
<span><span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">==</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select all rows where Age was more than 20</span></span>
<span><span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># everything but NY</span></span>
<span><span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Clinic</span> <span class="op">!=</span> <span class="st">"NY"</span><span class="op">)</span></span></code></pre></div>
<div class="warning">
<p>Remember to use <code>==</code> and not <code>=</code> to check if two things are equivalent. A single <code>=</code> assigns the right-hand value to the left-hand variable (much like the <code>&lt;-</code> operator).</p>
</div>
<div class="try">
<p>Which IDs are kept from the table below?</p>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">id</th>
<th align="left">grade</th>
<th align="right">score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">A</td>
<td align="right">95</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">A</td>
<td align="right">91</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">C</td>
<td align="right">76</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">B</td>
<td align="right">84</td>
</tr>
</tbody>
</table></div>
</div>
<ul>
<li>
<code>demo %&gt;% filter(score &lt; 80)</code>
<select class="webex-select"><option value="blank"></option>
<option value="x">1, 2</option>
<option value="x">2</option>
<option value="answer">3</option>
<option value="x">3, 4</option></select>
</li>
<li>
<code>demo %&gt;% filter(grade == "A")</code>
<select class="webex-select"><option value="blank"></option>
<option value="answer">1, 2</option>
<option value="x">2</option>
<option value="x">3</option>
<option value="x">3, 4</option></select>
</li>
<li>
<code>demo %&gt;% filter(grade != "A")</code>
<select class="webex-select"><option value="blank"></option>
<option value="x">1, 2</option>
<option value="x">2</option>
<option value="x">3</option>
<option value="answer">3, 4</option></select>
</li>
<li>
<code>demo %&gt;% filter(score == 91)</code>
<select class="webex-select"><option value="blank"></option>
<option value="x">1, 2</option>
<option value="answer">2</option>
<option value="x">3</option>
<option value="x">3, 4</option></select>
</li>
</ul>
</div>
<p>You can also select on multiple criteria by separating them by commas (rows will be kept if they match <em>all</em> criteria). Additionally, you can use <code>&amp;</code> ("and") and <code>|</code> ("or") to create complex criteria.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># patients with a BMI equal to or above 30 AND who have diabetes</span></span>
<span><span class="va">bmi_diabetes</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Diabetes</span> <span class="op">==</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">BMI</span> <span class="op">&gt;=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># the same as above, using &amp; instead of a comma</span></span>
<span><span class="va">bmi_diabetes</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Diabetes</span> <span class="op">==</span> <span class="st">"Yes"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">BMI</span> <span class="op">&gt;=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># patients with a BMI above or equal to 30 OR who have diabetes</span></span>
<span><span class="va">diabetes_either</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Diabetes</span> <span class="op">==</span> <span class="st">"Yes"</span> <span class="op">|</span></span>
<span>    <span class="va">BMI</span> <span class="op">&gt;=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>If you want the filter to retain multiple specific values in the same variable, the <a class="glossary">match operator<span class="def"></span></a> (<code>%in%</code>) should be used rather than <code>|</code> (or). The <code>!</code> can also be used in combination here, but it is placed before the variable name.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># retain any rows where Clinic is NY or MN or KY, and where Black equals yes</span></span>
<span><span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Clinic</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NY"</span>, <span class="st">"MN"</span>, <span class="st">"KY"</span><span class="op">)</span>,</span>
<span>         <span class="va">Black</span> <span class="op">==</span> <span class="st">"Yes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># retain any rows where the region is not NY or MN or KY, and where Black does not equal Yes</span></span>
<span><span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">Clinic</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NY"</span>, <span class="st">"MN"</span>, <span class="st">"KY"</span><span class="op">)</span>,</span>
<span>         <span class="va">Black</span> <span class="op">!=</span> <span class="st">"Yes"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="16%">
<col width="33%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th><a class="glossary">Operator<span class="def"></span></a></th>
<th>Name</th>
<th>is TRUE if and only if</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>A &lt; B</code></td>
<td>less than</td>
<td>A is less than B</td>
</tr>
<tr class="even">
<td><code>A &lt;= B</code></td>
<td>less than or equal</td>
<td>A is less than or equal to B</td>
</tr>
<tr class="odd">
<td><code>A &gt; B</code></td>
<td>greater than</td>
<td>A is greater than B</td>
</tr>
<tr class="even">
<td><code>A &gt;= B</code></td>
<td>greater than or equal</td>
<td>A is greater than or equal to B</td>
</tr>
<tr class="odd">
<td><code>A == B</code></td>
<td>equivalence</td>
<td>A exactly equals B</td>
</tr>
<tr class="even">
<td><code>A != B</code></td>
<td>not equal</td>
<td>A does not exactly equal B</td>
</tr>
<tr class="odd">
<td><code>A %in% B</code></td>
<td>in</td>
<td>A is an element of vector B</td>
</tr>
</tbody>
</table></div>
<div class="warning">
<p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> is incredibly powerful and can allow you to select very specific subsets of data. But, it is also quite dangerous because when you start combining multiple criteria and operators, it's very easy to accidentally specify something slightly different than what you intended. <strong>Always check your output</strong>. If you have a small dataset, then you can eyeball it to see if it looks right. With a larger dataset, you may wish to compute summary statistics or count the number of groups/observations in each variable to verify your filter is correct. There is no level of expertise in coding that can substitute knowing and checking your data.</p>
</div>
</div>
<div id="arrange" class="section level3" number="2.4.3">
<h3>
<span class="header-section-number">2.4.3</span> Arrange<a class="anchor" aria-label="anchor" href="#arrange"><i class="fas fa-link"></i></a>
</h3>
<p>You can sort your dataset using <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>. You will find yourself needing to sort data in R much less than you do in Excel, since you don't need to have rows next to each other in order to, for example, calculate group means. But <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> can be useful when preparing data for display in tables. <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> works on character data where it will sort alphabetically, as well as numeric data where the default is ascending order (smallest to largest). Reverse the order using <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># arranging the table </span></span>
<span><span class="co"># first by sex in alphabetical order</span></span>
<span><span class="co"># then by "baseline" in descending order</span></span>
<span><span class="va">polyps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">sex</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">baseline</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">participant_id</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">baseline</th>
<th align="left">treatment</th>
<th align="right">number3m</th>
<th align="right">number12m</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">002</td>
<td align="left">female</td>
<td align="right">20</td>
<td align="right">77</td>
<td align="left">placebo</td>
<td align="right">67</td>
<td align="right">63</td>
</tr>
<tr class="even">
<td align="left">017</td>
<td align="left">female</td>
<td align="right">22</td>
<td align="right">54</td>
<td align="left">placebo</td>
<td align="right">45</td>
<td align="right">46</td>
</tr>
<tr class="odd">
<td align="left">006</td>
<td align="left">female</td>
<td align="right">13</td>
<td align="right">35</td>
<td align="left">placebo</td>
<td align="right">31</td>
<td align="right">61</td>
</tr>
<tr class="even">
<td align="left">021</td>
<td align="left">female</td>
<td align="right">22</td>
<td align="right">20</td>
<td align="left">sulindac</td>
<td align="right">5</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">007</td>
<td align="left">female</td>
<td align="right">23</td>
<td align="right">11</td>
<td align="left">sulindac</td>
<td align="right">6</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">020</td>
<td align="left">female</td>
<td align="right">23</td>
<td align="right">10</td>
<td align="left">sulindac</td>
<td align="right">6</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">012</td>
<td align="left">female</td>
<td align="right">23</td>
<td align="right">8</td>
<td align="left">sulindac</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">001</td>
<td align="left">female</td>
<td align="right">17</td>
<td align="right">7</td>
<td align="left">sulindac</td>
<td align="right">6</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">004</td>
<td align="left">female</td>
<td align="right">18</td>
<td align="right">5</td>
<td align="left">placebo</td>
<td align="right">5</td>
<td align="right">28</td>
</tr>
<tr class="even">
<td align="left">010</td>
<td align="left">male</td>
<td align="right">19</td>
<td align="right">318</td>
<td align="left">placebo</td>
<td align="right">347</td>
<td align="right">44</td>
</tr>
<tr class="odd">
<td align="left">011</td>
<td align="left">male</td>
<td align="right">17</td>
<td align="right">160</td>
<td align="left">sulindac</td>
<td align="right">142</td>
<td align="right">25</td>
</tr>
<tr class="even">
<td align="left">016</td>
<td align="left">male</td>
<td align="right">23</td>
<td align="right">34</td>
<td align="left">sulindac</td>
<td align="right">27</td>
<td align="right">33</td>
</tr>
<tr class="odd">
<td align="left">019</td>
<td align="left">male</td>
<td align="right">34</td>
<td align="right">30</td>
<td align="left">placebo</td>
<td align="right">30</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">015</td>
<td align="left">male</td>
<td align="right">27</td>
<td align="right">24</td>
<td align="left">placebo</td>
<td align="right">26</td>
<td align="right">40</td>
</tr>
<tr class="odd">
<td align="left">005</td>
<td align="left">male</td>
<td align="right">22</td>
<td align="right">23</td>
<td align="left">sulindac</td>
<td align="right">16</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="left">013</td>
<td align="left">male</td>
<td align="right">22</td>
<td align="right">20</td>
<td align="left">placebo</td>
<td align="right">16</td>
<td align="right">28</td>
</tr>
<tr class="odd">
<td align="left">018</td>
<td align="left">male</td>
<td align="right">13</td>
<td align="right">16</td>
<td align="left">sulindac</td>
<td align="right">10</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">008</td>
<td align="left">male</td>
<td align="right">34</td>
<td align="right">12</td>
<td align="left">placebo</td>
<td align="right">20</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">022</td>
<td align="left">male</td>
<td align="right">42</td>
<td align="right">12</td>
<td align="left">sulindac</td>
<td align="right">8</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">014</td>
<td align="left">male</td>
<td align="right">30</td>
<td align="right">11</td>
<td align="left">placebo</td>
<td align="right">20</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">003</td>
<td align="left">male</td>
<td align="right">16</td>
<td align="right">7</td>
<td align="left">sulindac</td>
<td align="right">4</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">009</td>
<td align="left">male</td>
<td align="right">50</td>
<td align="right">7</td>
<td align="left">placebo</td>
<td align="right">7</td>
<td align="right">15</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="mutate" class="section level3" number="2.4.4">
<h3>
<span class="header-section-number">2.4.4</span> Mutate<a class="anchor" aria-label="anchor" href="#mutate"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> allows you to add new columns or change existing ones by overwriting them by using the syntax <code>new_column = operation</code>. You can add more than one column in the same mutate function by separating the columns with a comma. Once you make a new column, you can use it in further column definitions.</p>
<p>For example, the <code>polyps</code> dataset contains data on the number of polyps at baseline, after 3 months of treatment, and then after 12 months of treatment. We can create <code>treatment1</code> and <code>treatment2</code> to tell us the improvement in the number of polyps between these two treatment milestones (a negative number would be a good thing, as it means fewer polyps than at baseline), and then use the new variables to create <code>total</code>.</p>
<p>If you look at the dataset, you'll see that <code>total</code> contains some <code>NAs</code> (missing values), we'll come back to this soon.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps2</span> <span class="op">&lt;-</span> <span class="va">polyps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    treatment1 <span class="op">=</span> <span class="va">number3m</span> <span class="op">-</span> <span class="va">baseline</span> ,</span>
<span>    treatment2 <span class="op">=</span> <span class="va">number12m</span> <span class="op">-</span> <span class="va">number3m</span>,</span>
<span>    total <span class="op">=</span> <span class="va">treatment1</span> <span class="op">+</span> <span class="va">treatment2</span>,</span>
<span>    treatment  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">treatment</span> , <span class="st">"condition"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> can also be used in conjunction with other functions and Boolean operators. For example, we can add another column to <code>polyps2</code> that states whether any improvement in the number of polyps was seen or overwrite our <code>treatment</code> variable as a factor. Just like when we used <a class="glossary">Boolean expressions<span class="def"></span></a> with filter, it will evaluate the equation and return TRUE or FALSE depending on whether the observation meets the criteria.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps2</span> <span class="op">&lt;-</span> <span class="va">polyps2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>improvement <span class="op">=</span> <span class="va">total</span> <span class="op">&lt;</span> <span class="fl">0</span>,</span>
<span>         treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">treatment</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="warning">
<p>You can overwrite a column by giving a new column the same name as the old column (see <code>treatment</code>) above. Make sure that you mean to do this and that you aren't trying to use the old column value after you redefine it.</p>
</div>
<p>You can also use <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> to specify what values to return, rather than defaulting to TRUE or FALSE:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps3</span> <span class="op">&lt;-</span> <span class="va">polyps2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>improvement <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">total</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Decline"</span>,</span>
<span>                                 <span class="va">total</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"No change"</span>,</span>
<span>                                 <span class="va">total</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Improvement"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Use it to recode values:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a column of categories depending on number of polyps</span></span>
<span></span>
<span><span class="va">polyps4</span> <span class="op">&lt;-</span> <span class="va">polyps3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>category <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">baseline</span> <span class="op">&lt;=</span> <span class="fl">10</span> <span class="op">~</span> <span class="st">"Low"</span>,</span>
<span>                              <span class="va">baseline</span> <span class="op">&gt;</span> <span class="fl">10</span> <span class="op">&amp;</span> <span class="va">baseline</span> <span class="op">&lt;=</span> <span class="fl">30</span> <span class="op">~</span> <span class="st">"Medium"</span>,</span>
<span>                              <span class="va">baseline</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">~</span> <span class="st">"High"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And combine different criteria:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># patients are categorized as high if they have a high number of polyps if they are male and under 25</span></span>
<span></span>
<span><span class="va">polyps5</span> <span class="op">&lt;-</span> <span class="va">polyps4</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>risk <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">category</span> <span class="op">==</span> <span class="st">"High"</span> <span class="op">~</span> <span class="st">"High risk"</span>,</span>
<span>                          <span class="va">sex</span> <span class="op">==</span> <span class="st">"Male"</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">25</span> <span class="op">~</span> <span class="st">"High risk"</span>,</span>
<span>                          <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Not high risk"</span><span class="op">)</span><span class="op">)</span> <span class="co"># set all other values to "no bonus"</span></span></code></pre></div>
<p>Just like <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> is incredibly powerful and the scope of what you can create is far beyond what we can cover in this book.</p>
</div>
</div>
<div id="descriptive-statistics" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Descriptive statistics<a class="anchor" aria-label="anchor" href="#descriptive-statistics"><i class="fas fa-link"></i></a>
</h2>
<div id="count" class="section level3" number="2.5.1">
<h3>
<span class="header-section-number">2.5.1</span> Count<a class="anchor" aria-label="anchor" href="#count"><i class="fas fa-link"></i></a>
</h3>
<p>A useful and simple function is <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>. <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> will return the number of unique values of one or more variables - it's most likely you'd use this with a categorical/factor variable but it will also work with numeric data. You can count the total number of observations in a dataset:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># total number of observations (rows) in the dataset</span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">n</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">22</td>
</tr></tbody>
</table></div>
</div>
<p>Or the number of observations by a grouping variable:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># total number in each treatment condition</span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">treatment</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">treatment</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">placebo condition</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">sulindac condition</td>
<td align="right">11</td>
</tr>
</tbody>
</table></div>
</div>
<p>You can also use count with multiple grouping variables. For example, we could look at the number of male and female participants (it's not specified but I assume this is sex assigned at birth) in each treatment condition. Note that the order you specify the variables will affect the layout of the resulting table (I can never visualize which order I need to specify the variables in - my best advice is to run the code, look at the output, and edit if needed).</p>
<p>This code produces the number of male and female patients in each treatment</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">treatment</span>, <span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">treatment</th>
<th align="left">sex</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">placebo condition</td>
<td align="left">female</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">placebo condition</td>
<td align="left">male</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">sulindac condition</td>
<td align="left">female</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">sulindac condition</td>
<td align="left">male</td>
<td align="right">6</td>
</tr>
</tbody>
</table></div>
</div>
<p>Whilst this code produced the number in each treatment condition by sex assigned at birth:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">treatment</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">sex</th>
<th align="left">treatment</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">female</td>
<td align="left">placebo condition</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">female</td>
<td align="left">sulindac condition</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">male</td>
<td align="left">placebo condition</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">male</td>
<td align="left">sulindac condition</td>
<td align="right">6</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="dplyr-summarize" class="section level3" number="2.5.2">
<h3>
<span class="header-section-number">2.5.2</span> summarize<a class="anchor" aria-label="anchor" href="#dplyr-summarize"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> applies summary functions to an entire table (or groups, as you'll see in the next section). However, before we go much further we will need to deal with those pesky missing values.</p>
<p>Let's say we want to determine the mean, median, min and max number of polyps after treatment. The function <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> allows us to create a table where the column names will be the left-hand value (.e.g, <code>mean_polyps</code>) and the values will be the result of the operation on the right-hand side (e.g., take the <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> of the variable <code>total</code>).</p>
<p>The problem is that our dataset has a few missing values which produces a table full of <code>NA</code>s:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mean_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span>,</span>
<span>    median_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span>,</span>
<span>    min_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span>,</span>
<span>    max_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">mean_polyps</th>
<th align="right">median_polyps</th>
<th align="right">min_polyps</th>
<th align="right">max_polyps</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr></tbody>
</table></div>
</div>
<p>Whilst it can seem unintuitive that R won't return a number, it makes logical sense - the average of 100 and "I don't know" isn't 100, it's "I don't know". There's a few ways we can deal with this and this is where understanding your data and knowing what is missing and why is crucial.</p>
</div>
<div id="missing-values" class="section level3" number="2.5.3">
<h3>
<span class="header-section-number">2.5.3</span> Missing values<a class="anchor" aria-label="anchor" href="#missing-values"><i class="fas fa-link"></i></a>
</h3>
<p>First, let's get some stats on exactly how much missing data we have - we're going to go back to using the original <code>polyps</code> dataset we loaded in rather than the later ones we've created as it's the original missing data that is the cause of our problems.</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> evaluates whether the value in the cell is an <code>NA</code> so the below simply adds up how many values return an <code>NA</code> in each column.</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    missing_baseline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">baseline</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    missing_3m <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">number3m</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    missing_12m <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">number12m</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">missing_baseline</th>
<th align="right">missing_3m</th>
<th align="right">missing_12m</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
</tr></tbody>
</table></div>
</div>
<p>There's actually only two missing values in the 12 month column but that's enough to have caused us big problems down the line. When we calculated <code>treatment</code>, <code>treatment2</code>, and <code>total</code> we simply added or subtracted these variables from each other, ignoring the missing values which have been replicated in any new variable that used them:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    missing_treatment1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">treatment1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    missing_treatment2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">treatment2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    missing_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">missing_treatment1</th>
<th align="right">missing_treatment2</th>
<th align="right">missing_total</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">0</td>
<td align="right">2</td>
<td align="right">2</td>
</tr></tbody>
</table></div>
</div>
<p>There's three options for dealing with this. One option is to only use a complete dataset and remove any rows that have <code>NA</code> using the <code><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na()</a></code> function. The new dataset <code>polyps6</code> only has 20 observations as we have dropped the two participants that had missing data in the <code>number12m</code> column:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps6</span> <span class="op">&lt;-</span> <span class="va">polyps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">number12m</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>treatment1 <span class="op">=</span> <span class="va">number3m</span> <span class="op">-</span> <span class="va">baseline</span> ,</span>
<span>    treatment2 <span class="op">=</span> <span class="va">number12m</span> <span class="op">-</span> <span class="va">number3m</span>,</span>
<span>    total <span class="op">=</span> <span class="va">treatment1</span> <span class="op">+</span> <span class="va">treatment2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">polyps6</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mean_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span>,</span>
<span>    median_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span>,</span>
<span>    min_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span>,</span>
<span>    max_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">mean_polyps</th>
<th align="right">median_polyps</th>
<th align="right">min_polyps</th>
<th align="right">max_polyps</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">-19.85</td>
<td align="right">-5</td>
<td align="right">-274</td>
<td align="right">26</td>
</tr></tbody>
</table></div>
</div>
<p>A second option is to tell R to ignore the missing values in its calculations. We'll use the <code>polyps5</code> dataset that we first created that has the missing values but this time when we run <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>, we add in <code>na.rm = TRUE</code> which means "remove the NAs from the calculation". A useful addition to <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> if you're going to use <code>na.rm = TRUE</code> is to call <code>n = n()</code> which essentially does the same thing as <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> and tells you how many observations were used in the calculation and helps ensure we don't accidentally calculate summary data with lots of missing observations without realising it:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polyps6</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mean_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    median_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    min_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    max_polyps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">mean_polyps</th>
<th align="right">median_polyps</th>
<th align="right">min_polyps</th>
<th align="right">max_polyps</th>
<th align="right">n</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">-19.85</td>
<td align="right">-5</td>
<td align="right">-274</td>
<td align="right">26</td>
<td align="right">20</td>
</tr></tbody>
</table></div>
</div>
<p>Finally, we could also replace the <code>NA</code> values with another value. For example, in some datasets it might be appropriate to replace missing data with 0 or with the mean. Neither of these are actually appropriate for this dataset but we'll show you the code for how to do it anyway:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># replace NAs with 0</span></span>
<span><span class="va">polyps7</span> <span class="op">&lt;-</span> <span class="va">polyps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>number12m <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">number12m</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>treatment1 <span class="op">=</span> <span class="va">number3m</span> <span class="op">-</span> <span class="va">baseline</span> ,</span>
<span>    treatment2 <span class="op">=</span> <span class="va">number12m</span> <span class="op">-</span> <span class="va">number3m</span>,</span>
<span>    total <span class="op">=</span> <span class="va">treatment1</span> <span class="op">+</span> <span class="va">treatment2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># replace NAs with the mean of the 12m column</span></span>
<span><span class="va">polyps8</span> <span class="op">&lt;-</span> <span class="va">polyps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>number12m <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">number12m</span>, <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">number12m</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>treatment1 <span class="op">=</span> <span class="va">number3m</span> <span class="op">-</span> <span class="va">baseline</span> ,</span>
<span>    treatment2 <span class="op">=</span> <span class="va">number12m</span> <span class="op">-</span> <span class="va">number3m</span>,</span>
<span>    total <span class="op">=</span> <span class="va">treatment1</span> <span class="op">+</span> <span class="va">treatment2</span><span class="op">)</span></span></code></pre></div>
<p>Missing data can be quite difficult to deal with depending on how it is represented. As always, no amount of coding expertise can make up for not understanding the structure and idiosyncrasies of your data.</p>
</div>
<div id="dplyr-groupby" class="section level3" number="2.5.4">
<h3>
<span class="header-section-number">2.5.4</span> Group By<a class="anchor" aria-label="anchor" href="#dplyr-groupby"><i class="fas fa-link"></i></a>
</h3>
<p>We've already used <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> a few times but it's worth introducing it formally. <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> groups the dataset and whatever function is then performed on that dataset will be done separately by each level of the grouping variable. <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> makes it very easy to look at different combinations of variables:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># by one grouping variable (sex)</span></span>
<span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># by two grouping variables</span></span>
<span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">treatment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># order of the variables affects the layout of the table produced</span></span>
<span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">treatment</span>, <span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>You can also use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> in combination with other functions. For example, <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max()</a></code> returns the top N rows, ordered by a specific variable. In this example, we return the three patients with the largest reduction in polyps.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># return top 3 sales</span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">3</span>, order_by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="11%">
<col width="5%">
<col width="2%">
<col width="6%">
<col width="13%">
<col width="6%">
<col width="7%">
<col width="8%">
<col width="8%">
<col width="4%">
<col width="8%">
<col width="6%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">participant_id</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">baseline</th>
<th align="left">treatment</th>
<th align="right">number3m</th>
<th align="right">number12m</th>
<th align="right">treatment1</th>
<th align="right">treatment2</th>
<th align="right">total</th>
<th align="left">improvement</th>
<th align="left">category</th>
<th align="left">risk</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">010</td>
<td align="left">male</td>
<td align="right">19</td>
<td align="right">318</td>
<td align="left">placebo condition</td>
<td align="right">347</td>
<td align="right">44</td>
<td align="right">29</td>
<td align="right">-303</td>
<td align="right">-274</td>
<td align="left">Improvement</td>
<td align="left">High</td>
<td align="left">High risk</td>
</tr>
<tr class="even">
<td align="left">011</td>
<td align="left">male</td>
<td align="right">17</td>
<td align="right">160</td>
<td align="left">sulindac condition</td>
<td align="right">142</td>
<td align="right">25</td>
<td align="right">-18</td>
<td align="right">-117</td>
<td align="right">-135</td>
<td align="left">Improvement</td>
<td align="left">High</td>
<td align="left">High risk</td>
</tr>
<tr class="odd">
<td align="left">021</td>
<td align="left">female</td>
<td align="right">22</td>
<td align="right">20</td>
<td align="left">sulindac condition</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">-15</td>
<td align="right">-4</td>
<td align="right">-19</td>
<td align="left">Improvement</td>
<td align="left">Medium</td>
<td align="left">Not high risk</td>
</tr>
</tbody>
</table></div>
</div>
<p>But this can be combined with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> to return the largest reductions for each treatment:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># return top sale for each region</span></span>
<span><span class="va">polyps5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">treatment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">3</span>, order_by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="11%">
<col width="5%">
<col width="2%">
<col width="6%">
<col width="13%">
<col width="6%">
<col width="7%">
<col width="8%">
<col width="8%">
<col width="4%">
<col width="8%">
<col width="6%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">participant_id</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="right">baseline</th>
<th align="left">treatment</th>
<th align="right">number3m</th>
<th align="right">number12m</th>
<th align="right">treatment1</th>
<th align="right">treatment2</th>
<th align="right">total</th>
<th align="left">improvement</th>
<th align="left">category</th>
<th align="left">risk</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">010</td>
<td align="left">male</td>
<td align="right">19</td>
<td align="right">318</td>
<td align="left">placebo condition</td>
<td align="right">347</td>
<td align="right">44</td>
<td align="right">29</td>
<td align="right">-303</td>
<td align="right">-274</td>
<td align="left">Improvement</td>
<td align="left">High</td>
<td align="left">High risk</td>
</tr>
<tr class="even">
<td align="left">002</td>
<td align="left">female</td>
<td align="right">20</td>
<td align="right">77</td>
<td align="left">placebo condition</td>
<td align="right">67</td>
<td align="right">63</td>
<td align="right">-10</td>
<td align="right">-4</td>
<td align="right">-14</td>
<td align="left">Improvement</td>
<td align="left">High</td>
<td align="left">High risk</td>
</tr>
<tr class="odd">
<td align="left">017</td>
<td align="left">female</td>
<td align="right">22</td>
<td align="right">54</td>
<td align="left">placebo condition</td>
<td align="right">45</td>
<td align="right">46</td>
<td align="right">-9</td>
<td align="right">1</td>
<td align="right">-8</td>
<td align="left">Improvement</td>
<td align="left">High</td>
<td align="left">High risk</td>
</tr>
<tr class="even">
<td align="left">011</td>
<td align="left">male</td>
<td align="right">17</td>
<td align="right">160</td>
<td align="left">sulindac condition</td>
<td align="right">142</td>
<td align="right">25</td>
<td align="right">-18</td>
<td align="right">-117</td>
<td align="right">-135</td>
<td align="left">Improvement</td>
<td align="left">High</td>
<td align="left">High risk</td>
</tr>
<tr class="odd">
<td align="left">021</td>
<td align="left">female</td>
<td align="right">22</td>
<td align="right">20</td>
<td align="left">sulindac condition</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">-15</td>
<td align="right">-4</td>
<td align="right">-19</td>
<td align="left">Improvement</td>
<td align="left">Medium</td>
<td align="left">Not high risk</td>
</tr>
<tr class="even">
<td align="left">007</td>
<td align="left">female</td>
<td align="right">23</td>
<td align="right">11</td>
<td align="left">sulindac condition</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">-5</td>
<td align="right">-5</td>
<td align="right">-10</td>
<td align="left">Improvement</td>
<td align="left">Medium</td>
<td align="left">Not high risk</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div id="complications" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Complications<a class="anchor" aria-label="anchor" href="#complications"><i class="fas fa-link"></i></a>
</h2>
<div id="rounding" class="section level3" number="2.6.1">
<h3>
<span class="header-section-number">2.6.1</span> Rounding<a class="anchor" aria-label="anchor" href="#rounding"><i class="fas fa-link"></i></a>
</h3>
<p>For the purposes of this exercise we're going to switch back to the <code>opt</code> gum disease dataset as we need some data in decimal form.</p>
<p>First, let's just round one variable to one decimal place.<code>BL.PD.avg</code> is the whole-mouth average pocket depth at baseline (mm).</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt2</span> <span class="op">&lt;-</span> <span class="va">opt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">BL.PD.avg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BL.PD.avg.1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">BL.PD.avg</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># round to one decimal place</span></span>
<span>         BL.PD.avg.whole <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">BL.PD.avg</span><span class="op">)</span><span class="op">)</span> <span class="co"># round to whole number</span></span></code></pre></div>
<p>Looks fairly simple, but, there's a quirk of rounding in R that's important to know about. Let's filter the values to those that are 2.5, 3.5 and 4.5 and then round those values to a whole number:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt3</span> <span class="op">&lt;-</span> <span class="va">opt2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">BL.PD.avg.1</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">3.5</span>, <span class="fl">4.5</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BL.PD.avg.whole <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">BL.PD.avg.1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you look through the values you will spot that 2.5 has rounded down to 2, 3.5 has rounded up to 4, and 4.5 has rounded down to 4. This may seem like a mistake, but R rounds .5 to the nearest even number, rather than always up, like you were probably taught in school. This prevents overestimation biases, since x.5 is <em>exactly</em> halfway between x and x+1, so there is no reason it should always round up.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 0
## [1] 2</code></pre>
<p>However, this might throw a monkey wrench into your own systems. For example, at the University of Glasgow, the policy is to round up for course marks at x.5. One solution is to define your own version of <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> (modified from <a href="http://andrewlandgraf.com/2012/06/15/rounding-in-r/" target="_blank">Andrew Landgraf's blog</a>). Put it in a hidden code block at the top of your script, with a clear warning that this is changing the way <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> normally works. You don't need to understand how this function works, just how to use it.</p>
<p>when you run this code, a new section will appear in the environment pane labelled "Functions". In addition to using functions from packages, you can also make your own. It's not something we are going to go into detail on in this course, but it's useful to know the functionality exists.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#!!!!!! redefining round so 5s round up !!!!!! </span></span>
<span><span class="va">round</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">digits</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">posneg</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sign.html">sign</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">*</span><span class="fl">10</span><span class="op">^</span><span class="va">digits</span></span>
<span>  <span class="va">z</span> <span class="op">=</span> <span class="va">z</span> <span class="op">+</span> <span class="fl">0.5</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span><span class="op">)</span></span>
<span>  <span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">trunc</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span>
<span>  <span class="va">z</span> <span class="op">=</span> <span class="va">z</span><span class="op">/</span><span class="fl">10</span><span class="op">^</span><span class="va">digits</span></span>
<span>  <span class="va">z</span><span class="op">*</span><span class="va">posneg</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> should work as you'd expect.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1
## [1] 2</code></pre>
<p>Just remove your version if you want R to go back to the original method. Remember that you have to define the new round method in any script that uses it, and run the definition code before you use it interactively. You can check your Environment pane to see whether <code>round</code> is listed under "Functions".</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remove new round() method</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">round</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="exercise" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise"><i class="fas fa-link"></i></a>
</h2>
<p>To help consolidate what you've learned in this chapter, use a dataset of your own that you're familiar with and replicate the functions we've gone through in this chapter. Additionally, try and identifying other steps in your data cleaning and wrangling process that you typically need to perform and see if you can find the necessary functions or arguments needed to do so. If you're looking for help online, you may find it useful to append "r dplyr" to any search, for example, "rename a column r dplyr" as this will be more likely to return results that use the tidyverse style of code we have used in this course.</p>
</div>
<div id="glossary-wrangle" class="section level2" number="2.8">
<h2>
<span class="header-section-number">2.8</span> Glossary<a class="anchor" aria-label="anchor" href="#glossary-wrangle"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:left;">
definition
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
boolean expression
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
match operator
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Operator
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table></div>
</div>
<div id="resources-wrangle" class="section level2" number="2.9">
<h2>
<span class="header-section-number">2.9</span> Further resources<a class="anchor" aria-label="anchor" href="#resources-wrangle"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf">Data transformation cheat sheet</a></li>
<li>
<a href="http://r4ds.had.co.nz/transform.html">Chapter 5: Data Transformation</a> in <em>R for Data Science</em>
</li>
<li>
<a href="https://r4ds.had.co.nz/functions.html">Chapter 19: Functions</a> in <em>R for Data Science</em>
</li>
<li><a href="https://stringr.tidyverse.org/articles/stringr.html">Introduction to stringr</a></li>
</ul>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  // open rdrr links externally
  $("a[href^='https://rdrr.io']").click(function(){
    window.open(this.href);
    return false;
  });

  // visible second sidebar in mobile
  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><div class="chapter-nav">
<div class="prev"><a href="prerequisites.html"><span class="header-section-number">1</span> Pre-requisites</a></div>
<div class="next"><a href="tidy.html"><span class="header-section-number">3</span> Data Tidying</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#wrangle"><span class="header-section-number">2</span> Data Wrangling</a></li>
<li><a class="nav-link" href="#ilo-wrangle"><span class="header-section-number">2.1</span> Intended Learning Outcomes</a></li>
<li><a class="nav-link" href="#walkthrough-wrangle"><span class="header-section-number">2.2</span> Walkthrough video</a></li>
<li><a class="nav-link" href="#setup-wrangle"><span class="header-section-number">2.3</span> Set-up</a></li>
<li>
<a class="nav-link" href="#wrangling-functions"><span class="header-section-number">2.4</span> Wrangling functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#select"><span class="header-section-number">2.4.1</span> Select</a></li>
<li><a class="nav-link" href="#filter"><span class="header-section-number">2.4.2</span> Filter</a></li>
<li><a class="nav-link" href="#arrange"><span class="header-section-number">2.4.3</span> Arrange</a></li>
<li><a class="nav-link" href="#mutate"><span class="header-section-number">2.4.4</span> Mutate</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#descriptive-statistics"><span class="header-section-number">2.5</span> Descriptive statistics</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#count"><span class="header-section-number">2.5.1</span> Count</a></li>
<li><a class="nav-link" href="#dplyr-summarize"><span class="header-section-number">2.5.2</span> summarize</a></li>
<li><a class="nav-link" href="#missing-values"><span class="header-section-number">2.5.3</span> Missing values</a></li>
<li><a class="nav-link" href="#dplyr-groupby"><span class="header-section-number">2.5.4</span> Group By</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#complications"><span class="header-section-number">2.6</span> Complications</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#rounding"><span class="header-section-number">2.6.1</span> Rounding</a></li></ul>
</li>
<li><a class="nav-link" href="#exercise"><span class="header-section-number">2.7</span> Exercise</a></li>
<li><a class="nav-link" href="#glossary-wrangle"><span class="header-section-number">2.8</span> Glossary</a></li>
<li><a class="nav-link" href="#resources-wrangle"><span class="header-section-number">2.9</span> Further resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/template/blob/master/book/02-wrangle.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/template/edit/master/book/02-wrangle.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Intro to Data Wrangling and Analysis Using R</strong>" was written by Emily Nordmann &amp; Javan Carter. It was last built on 2023-12-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
